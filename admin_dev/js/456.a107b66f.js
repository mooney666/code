"use strict";(self["webpackChunkweb_admin"]=self["webpackChunkweb_admin"]||[]).push([[456],{7867:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});a(33),a(6226),a(8375),a(812);var l=a(2675),n=a(4018),r=a(432),o=a(3396),s=a(4870),i=(a(6905),a(9007),a(172),a(1430),a(6809),a(879)),u=a(534),d=a(9971),c=a(5791),m=a(7139),p=a(9242),v=a(102),_=a(4876),f=a(547),w=a(6406);const y={class:"table"},b=(0,o.Uk)(" + New Tag "),U=(0,o.Uk)("编辑 "),g=(0,o.Uk)("删除 ");var h={props:{name:String,cat_id:Number},setup(e){const t=e;let a=(0,s.iH)([]),l=async()=>{let e=await(0,w.uC)(t.cat_id,t.name);console.log(e),e.data.data.forEach((e=>{"many"==t.name?e.attr_vals=e.attr_vals.split(","):e.attr_vals=e.attr_vals.split(" ")})),a.value=e.data.data,console.log(a.value)};(0,o.YP)(t,(()=>{l()}));let n=(0,s.iH)(""),r=(0,s.iH)(!1),h=()=>{r.value=!0},S=async e=>{""!=n.value?(r.value=!1,e.attr_vals.push(n.value),E(e)):(0,v.Z)("请您输入内容","error")},k=(e,t)=>{e.attr_vals.splice(t,1),E(e)},E=async e=>{let a,l=t.cat_id,r=e.attr_id;a="many"==e.attr_sel?e.attr_vals.join(","):e.attr_vals.join(" ");let o={attr_name:e.attr_name,attr_sel:e.attr_sel,attr_vals:a},s=await(0,w.Rm)(l,r,o);200==s.data.meta.status?((0,v.Z)("操作成功","success"),n.value=""):(0,v.Z)(s.data.meta.msg,"error")};return(e,l)=>{const v=c.mi,w=d.Ks,E=u.EZ,W=i.$Y,C=i.eI;return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",null,[(0,o.Wm)(v,{type:"primary",disabled:!(0,s.SU)(t).cat_id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,m.zw)("many"==(0,s.SU)(t).name?"添加参数":"添加属性"),1)])),_:1},8,["disabled"])]),(0,o._)("div",y,[(0,o.Wm)(C,{data:(0,s.SU)(a),border:"",style:{width:"100%"},"row-key":"attr_id"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{type:"expand"},{default:(0,o.w5)((e=>[(0,o._)("div",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.row.attr_vals,((t,a)=>((0,o.wg)(),(0,o.j4)(w,{key:a,closable:"",class:"mytag",size:"small",onClose:t=>(0,s.SU)(k)(e.row,a)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,m.zw)(t),1)])),_:2},1032,["onClose"])))),128)),(0,s.SU)(r)?((0,o.wg)(),(0,o.j4)(E,{key:0,ref:"InputRef",modelValue:(0,s.SU)(n),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,s.dq)(n)?n.value=e:n=e),class:"ml-1 w-20",size:"small",onKeyup:(0,p.D2)((t=>(0,s.SU)(S)(e.row)),["enter"]),onBlur:t=>(0,s.SU)(S)(e.row)},null,8,["modelValue","onKeyup","onBlur"])):((0,o.wg)(),(0,o.j4)(v,{key:1,class:"button-new-tag ml-1",size:"small",onClick:(0,s.SU)(h)},{default:(0,o.w5)((()=>[b])),_:1},8,["onClick"]))])])),_:1}),(0,o.Wm)(W,{prop:"attr_id",label:"#id",width:"80"}),(0,o.Wm)(W,{prop:"attr_name",label:"参数名称",width:"200"}),(0,o.Wm)(W,{label:"操作"},{default:(0,o.w5)((e=>[(0,o.Wm)(v,{type:"primary",icon:(0,s.SU)(_.Z),size:"small"},{default:(0,o.w5)((()=>[U])),_:1},8,["icon"]),(0,o.Wm)(v,{type:"danger",icon:(0,s.SU)(f.Z),size:"small"},{default:(0,o.w5)((()=>[g])),_:1},8,["icon"])])),_:1})])),_:1},8,["data"])])])}}},S=a(89);const k=(0,S.Z)(h,[["__scopeId","data-v-506617ef"]]);var E=k,W=a(65);const C={class:"params"},H={class:"cate"},Z=(0,o.Uk)(" 选择分类： ");var A={setup(e){let t=(0,W.oR)();t.commit("changeNavList",["商品管理","分类参数"]);let a=(0,s.iH)([]),i=(0,s.iH)([]),u=(0,s.iH)(null),d=(0,s.qj)({label:"cat_name",value:"cat_id",children:"children"}),c=e=>{if(console.log(e),e.length<3)return(0,v.Z)("分类必须为三级分类","error"),i.value=[],void(u.value=null);u.value=e[2]},m=async()=>{let e=await(0,w.fQ)();console.log(e),a.value=e.data.data};m();let p=(0,s.iH)("many"),_=(0,s.iH)([{name:"many",title:"动态参数"},{name:"only",title:"静态属性"}]);return(e,t)=>{const m=r.v,v=n.m,f=l.p8,w=l.Ub;return(0,o.wg)(),(0,o.iD)("div",C,[(0,o._)("div",null,[(0,o.Wm)(m,{title:"注意：只允许为三级分类设置属性！！！",type:"success","show-icon":""})]),(0,o._)("div",H,[Z,(0,o.Wm)(v,{modelValue:(0,s.SU)(i),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,s.dq)(i)?i.value=e:i=e),options:(0,s.SU)(a),onChange:(0,s.SU)(c),props:(0,s.SU)(d),placeholder:"请选择"},null,8,["modelValue","options","onChange","props"])]),(0,o._)("div",null,[(0,o.Wm)(w,{modelValue:(0,s.SU)(p),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,s.dq)(p)?p.value=e:p=e),class:"demo-tabs"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,s.SU)(_),((e,t)=>((0,o.wg)(),(0,o.j4)(f,{key:t,label:e.title,name:e.name},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{name:e.name,cat_id:(0,s.SU)(u)},null,8,["name","cat_id"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])])}}};const V=(0,S.Z)(A,[["__scopeId","data-v-30b361a0"]]);var x=V},1056:function(e,t,a){a.d(t,{Be:function(){return i},Zs:function(){return u},b9:function(){return r},dJ:function(){return d},qe:function(){return s}});const l='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',n=e=>{const t=getComputedStyle(e);return"fixed"!==t.position&&null!==e.offsetParent},r=e=>Array.from(e.querySelectorAll(l)).filter((e=>o(e)&&n(e))),o=e=>{if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return!("hidden"===e.type||"file"===e.type);case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},s=function(e,t,...a){let l;l=t.includes("mouse")||t.includes("click")?"MouseEvents":t.includes("key")?"KeyboardEvent":"HTMLEvents";const n=document.createEvent(l);return n.initEvent(t,...a),e.dispatchEvent(n),e},i=e=>!e.getAttribute("aria-owns"),u=(e,t,a)=>{const{parentNode:l}=e;if(!l)return null;const n=l.querySelectorAll(a),r=Array.prototype.indexOf.call(n,e);return n[r+t]||null},d=e=>{e&&(e.focus(),!i(e)&&e.click())}}}]);
//# sourceMappingURL=456.a107b66f.js.map